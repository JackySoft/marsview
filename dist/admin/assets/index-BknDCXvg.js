import{j as c}from"./index-DMqIlrkt.js";import{u as x,i as R,h as I}from"./index-DUu9Owj8.js";import{F as y}from"./context-V_gTMpak.js";import"./_commonjsHelpers-BosuxZz1.js";import"./immer-DZPz5TFl.js";const D=window.antd.Form,F=window.antd.Cascader,j=window.React.forwardRef,V=window.React.useContext,o=window.React.useEffect,W=window.React.useImperativeHandle,d=window.React.useState,A=({config:a,onChange:p},w)=>{var m;const s=V(y),[f,n]=d([]),[b,i]=d(!0),[v,r]=d(!1),C=x(e=>e.page.variableData);o(()=>{var u;const e=(u=a.props.formItem)==null?void 0:u.name,t=a.props.defaultValue;e&&!R(t)&&(s==null||s.setFieldValue(e,t))},[a.props.defaultValue]),o(()=>{r(a.props.formWrap.disabled||!1)},[a.props.formWrap.disabled]),o(()=>{l({})},[a.api,((m=a.api)==null?void 0:m.sourceType)=="variable"?C:""]);const l=e=>{I(a.api,e).then(t=>{(t==null?void 0:t.ret)===0&&(Array.isArray(t.data)?n(t.data):(console.error("[Cascader]","data数据格式错误，请检查"),n([])))})};W(w,()=>({show(){i(!0)},hide(){i(!1)},enable(){r(!1)},disable(){r(!0)},update:e=>{l(e)}}));const h=e=>{p&&p({[a.props.formItem.name]:e})};return b&&c.jsx(D.Item,{...a.props.formItem,children:c.jsx(F,{...a.props.formWrap,disabled:v,variant:a.props.formWrap.variant||void 0,options:f,style:{...a.style},onChange:e=>h(e)})})},N=j(A);export{N as Cascader};
